<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tests &mdash; BioSNICAR 2.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="src" href="src.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> BioSNICAR
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="theoretical-background.html">Theoretical Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-use.html">How to Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Configuration Guide for BioSNICAR</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">BioSNICAR Functions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="src.html">src</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tests-conftest">tests.conftest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-tests.test_snicar">tests.test_snicar</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BioSNICAR</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules.html">BioSNICAR Functions</a> &raquo;</li>
      <li>tests</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tests.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tests">
<h1>tests<a class="headerlink" href="#tests" title="Permalink to this headline"></a></h1>
<section id="tests-conftest">
<h2>tests.conftest<a class="headerlink" href="#tests-conftest" title="Permalink to this headline"></a></h2>
<p>Conftest contains fixtures for the tests in test_snicar().</p>
<span class="target" id="module-tests.conftest"></span><dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.fuzz">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">fuzz</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#fuzz"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.fuzz" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.get_matlab_data">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">get_matlab_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#get_matlab_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.get_matlab_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.get_matlab_data_clean">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">get_matlab_data_clean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#get_matlab_data_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.get_matlab_data_clean" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.get_n_spectra">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">get_n_spectra</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#get_n_spectra"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.get_n_spectra" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.get_python_data">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">get_python_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#get_python_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.get_python_data" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.get_python_data_clean">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">get_python_data_clean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#get_python_data_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.get_python_data_clean" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.new_benchmark_ad">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">new_benchmark_ad</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#new_benchmark_ad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.new_benchmark_ad" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.new_benchmark_ad_clean">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">new_benchmark_ad_clean</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#new_benchmark_ad_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.new_benchmark_ad_clean" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.conftest.set_tolerance">
<span class="sig-prename descclassname"><span class="pre">tests.conftest.</span></span><span class="sig-name descname"><span class="pre">set_tolerance</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/conftest.html#set_tolerance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.conftest.set_tolerance" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-tests.test_snicar">
<span id="tests-test-snicar"></span><h2>tests.test_snicar<a class="headerlink" href="#module-tests.test_snicar" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.match_matlab_config">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">match_matlab_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ice</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">illumination</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rt_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#match_matlab_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.match_matlab_config" title="Permalink to this definition"></a></dt>
<dd><p>Ensures model config is equal to the Matlab version used to generate benchmark data.</p>
<p>This function resets values in instances of Ice, Illumination and ModelConfig to ensure
equivalence between BioSNICAR and the Matlab code used to generate the benchmark data.
Also ensures all vars have correct length, and re-executes the class functions in Ice and
Illumination that update refractive indices and at-surface irradiance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ice</strong> – instance of Ice class</p></li>
<li><p><strong>illumination</strong> – instance of Illumination class</p></li>
<li><p><strong>rt_config</strong> – instance of RTConfig class</p></li>
<li><p><strong>model_config</strong> – instance of ModelConfig class</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>updated instance of Ice class
illumination: updated instance of Illumination class
impurities: array of instances of Impurity class
rt_config: updated instance of RTConfig class
model_config: updated instance of ModelConfig class</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ice</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_AD_solver">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_AD_solver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_benchmark_ad</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_AD_solver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_AD_solver" title="Permalink to this definition"></a></dt>
<dd><p>Tests Toon solver against SNICAR_ADv4 benchmark.</p>
<p>This func generates a new file - py_benchmark_data.csv - that contains
spectral and broadband albedo simulated by BioSNICAR for a range of input
configurations. The same set of simulations was also run using a previously
published version of the SNICAR code written in Matlab by Chloe Whicker at
University of Michigan and run on the UMich server. This function
only creates the equivalent dataset using BioSNICAR, it doesn’t compare the two.</p>
<p>Equivalence between the Python and Matlab model configuration is controlled by
a call to match_matlab_config(). This function can be toggled off by setting
new_benchmark_ad to False in conftest.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_benchmark_ad</strong> – Boolean toggling this function on/off</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None but saves py_benchmark_data.csv to ./tests/test_data/</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_AD_solver_clean">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_AD_solver_clean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_benchmark_ad_clean</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_AD_solver_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_AD_solver_clean" title="Permalink to this definition"></a></dt>
<dd><p>Tests Toon solver against SNICAR_ADv4 benchmark for impurity-free ice.</p>
<p>This func generates a new file - py_benchmark_data_clean.csv - that contains
spectral and broadband albedo simulated by BioSNICAR for a range of input
configurations. The same set of simulations was also run using a previously
published version of the SNICAR code written in Matlab by Chloe Whicker at
University of Michigan and run on the UMich server. This function
only creates the equivalent dataset using BioSNICAR, it doesn’t compare the two.
The difference between this function and test_v4 is that no impurities are included
in the model configuration.</p>
<p>Equivalence between the Python and Matlab model configuration is controlled by
a call to match_matlab_config(). This function can be toggled off by setting
new_benchmark_clean to False in conftest.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_benchmark_clean</strong> – Boolean toggling this function on/off</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None but saves py_benchmark_data_clean.csv to ./tests/test_data/</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_compare_pyBBA_to_matBBA">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_compare_pyBBA_to_matBBA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_matlab_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_python_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_tolerance</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_compare_pyBBA_to_matBBA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_compare_pyBBA_to_matBBA" title="Permalink to this definition"></a></dt>
<dd><p>Tests that BBA values match between BioSNICAR data and the benchmark.</p>
<p>Element-wise comparison between BBAs in equivalent positions in the Matlab benchmark
dataset and the newly generated BioSNICAR dataset for the AD solver.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_matlab_data</strong> – matlab-snicar-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_python_data</strong> – BioSNICAR generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>set_tolerance</strong> – threshold error for BBAs to be considered equal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>tests fail if the difference between any pair of BBA values exceeds set_tolerance</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_compare_pyBBA_to_matBBA_clean">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_compare_pyBBA_to_matBBA_clean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_matlab_data_clean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_python_data_clean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_tolerance</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_compare_pyBBA_to_matBBA_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_compare_pyBBA_to_matBBA_clean" title="Permalink to this definition"></a></dt>
<dd><p>Tests that BBA values match between BioSNICAR data and the benchmark for clean ice.</p>
<p>Element-wise comparison between BBAs in equivalent positions in the Matlab benchmark
dataset and the newly generated BioSNICAR dataset for the AD solver with no impurities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_matlab_data</strong> – matlab-snicar-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_python_data</strong> – BioSNICAR generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>set_tolerance</strong> – threshold error for BBAs to be considered equal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>tests fail if the difference between any pair of BBA values exceeds set_tolerance</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_compare_pyspec_to_matspec_ad">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_compare_pyspec_to_matspec_ad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_matlab_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_python_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_tolerance</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_compare_pyspec_to_matspec_ad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_compare_pyspec_to_matspec_ad" title="Permalink to this definition"></a></dt>
<dd><p>Tests that spectral albedo values match between BioSNICAR data and the AD benchmark.</p>
<p>Element-wise comparison between spectral albedo in equivalent positions in the Matlab benchmark
dataset and the newly generated BioSNICAR dataset for the AD solver. Albedo is compared
wavelength by wavelength for each column in the datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_matlab_data</strong> – matlab-snicar-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_python_data</strong> – BioSNICAR generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>set_tolerance</strong> – threshold error for BBAs to be considered equal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>tests fail if the difference between any pair of albedo values exceeds set_tolerance</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_compare_pyspec_to_matspec_clean">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_compare_pyspec_to_matspec_clean</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_matlab_data_clean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_python_data_clean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">set_tolerance</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_compare_pyspec_to_matspec_clean"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_compare_pyspec_to_matspec_clean" title="Permalink to this definition"></a></dt>
<dd><p>Tests that spectral albedo values match between BioSNICAR data and the Toon benchmark.</p>
<p>Element-wise comparison between spectral albedo in equivalent positions in the Matlab benchmark
dataset and the newly generated BioSNICAR dataset for the AD solver with no impurities.
Albedo is compared wavelength by wavelength for each column in the datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_matlab_data_clean</strong> – matlab-snicar-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_python_data_clean</strong> – BioSNICAR generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>set_tolerance</strong> – threshold error for BBAs to be considered equal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>tests fail if the difference between any pair of albedo values exceeds set_tolerance</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_config_fuzzer">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_config_fuzzer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aprx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fuzz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_config_fuzzer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_config_fuzzer" title="Permalink to this definition"></a></dt>
<dd><p>Checks model runs correctly with range of input value combinations.</p>
<p>Fuzzer checks that model functions correctly across range of configurations.
This fuzzer spoecifically checks rtm config and illumination parameters. The
range of values is set in the parameterize decorators on this function and can
be adjusted to test for specific failures or to increase test coverage. The
defaults are designed to balance coverage with execution time. This func can be
toggled off by setting fuzz to fase in conftest.py</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dir</strong> – Boolean toggling between direct and diffuse irradiance</p></li>
<li><p><strong>aprx</strong> – choice of two-stream approximation</p></li>
<li><p><strong>inc</strong> – choice of spectral distribution of incoming irradiance</p></li>
<li><p><strong>ref</strong> – chocie of refractive indices (Warren 1984, Warren 2008, Picard 2016)</p></li>
<li><p><strong>fuzz</strong> – boolean toggling this fuxxing func on/off</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>tests fail if snicar throws an exception with a particular configuration</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_plot_random_spectra_pairs">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_plot_random_spectra_pairs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_matlab_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_python_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_n_spectra</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_plot_random_spectra_pairs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_plot_random_spectra_pairs" title="Permalink to this definition"></a></dt>
<dd><p>Plots random selection of N spectra pairs and saves to /tests/test_data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_matlab_data</strong> – matlab-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_python_data</strong> – python-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_n_spectra</strong> – number of pairs of spectral albedo to plot</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None but saves py_mat_comparison.png to /tests/test_data/</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_realistic_bba_ad">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_realistic_bba_ad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">get_matlab_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_python_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_realistic_bba_ad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_realistic_bba_ad" title="Permalink to this definition"></a></dt>
<dd><p>Tests that BBA values are never &gt;1 or &lt;0.</p>
<p>Simple test that ensures broadband albedo predicted by model never
goes outside valid range of 0-1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>get_matlab_data</strong> – matlab-snicar-generated csv file of spectral and broadband albedo</p></li>
<li><p><strong>get_python_data</strong> – BioSNICAR generated csv file of spectral and broadband albedo</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tests fail if the two datasets differ in length</strong> – </p></li>
<li><p><strong>tests fail if any BBA values in matlab data are &lt;0</strong><strong> or </strong><strong>&gt;1</strong> – </p></li>
<li><p><strong>tests fail if any BBA values in python data are &lt;0</strong><strong> or </strong><strong>&gt;1</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tests.test_snicar.test_var_fuzzer">
<span class="sig-prename descclassname"><span class="pre">tests.test_snicar.</span></span><span class="sig-name descname"><span class="pre">test_var_fuzzer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rho</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zen</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cfactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dust</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fuzz</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tests/test_snicar.html#test_var_fuzzer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tests.test_snicar.test_var_fuzzer" title="Permalink to this definition"></a></dt>
<dd><p>Checks model runs correctly with range of input value combinations.</p>
<p>Fuzzer checks that model functions correctly across range of configurations.
This fuzzer spoecifically checks input parameters including ice physical properties.
The range of values is set in the parameterize decorators on this function and can
be adjusted to test for specific failures or to increase test coverage. The
defaults are designed to balance coverage with execution time. This func can be
toggled off by setting fuzz to fase in conftest.py</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rds</strong> – effective grain radius (um) of ice grains (lyr_typ==0) or air bubbles (lyr_typ==1)</p></li>
<li><p><strong>rho</strong> – density of ice layer (kg/m3)</p></li>
<li><p><strong>zen</strong> – zenith angle of direct beam (degrees from vertical)</p></li>
<li><p><strong>cfactor</strong> – concentrating factor used to convert field-measured to modelled LAP concentration</p></li>
<li><p><strong>dust</strong> – concentration of mineral dust in each layer of the model (ppb)</p></li>
<li><p><strong>algae</strong> – concentration of glacir algae in each layer of the model (ppb)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>tests fail if snicar throws an exception with a particular configuration</strong> – </p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="src.html" class="btn btn-neutral float-left" title="src" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Joseph Cook.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>